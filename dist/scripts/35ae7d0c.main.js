function listDeselect(){$("#country").prop("selectedIndex",-1)}function validateHandler(){var a=[["#plan","presence","Required field"],["#manager","presence","Required field"],["#company","presence","Required field"],["#email","presence","Required field"],["#country","presence","Required field"],["#phone","presence","Required field"],["#users","presence","Required field"],["#amount","presence","Required field"],["#domain","presence","Required field"],["#users","min-num:1","Minimum 1 user"],["#users","max-num:999","Maximum 999 users"],["#users","integer","Numbers only"],["#email","email","Must be a valid email"],["#amount","min-num:1","Min. payment 1$"]],b={delay:2e3,helpSpanDisplay:"help-block",groupSelector:".input-group",groupClass:"warning"};$("#purchase").nod(a,b).on("submit")}function focusToNameInput(){$("#manager").focus()}function getURLParameter(a){for(var b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(e[0]==a)return e[1]}}function getAvailablePlans(){$.getJSON("http://121.254.175.67:3456/plans",function(a){$.each(a.available_plans,function(a,b){var c=getURLParameter("plan"),d="";b.name===c&&(d="selected"),$("#plan").append('<option value="'+b.desc+'" '+d+">"+b.desc+"</option>")})})}function formSubmitHandler(){$("#purchase").bind("submit",function(a){var b=$(this).serialize();console.log(b),a.preventDefault(),$.ajax({url:"http://paypal.mofficesuite.com:3456/create",type:"POST",dataType:"json",data:b,success:function(a){if(a.result){for(var b,c=0;c<a.payment.links.length;c++){var d=a.payment.links[c];"REDIRECT"===d.method&&(b=d.href)}window.location.href=b}},error:function(a){console.log(a)}})})}$(document).ready(function(){validateHandler(),focusToNameInput(),getAvailablePlans(),listDeselect()});